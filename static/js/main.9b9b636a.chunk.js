(this["webpackJsonpreact-tab-site"]=this["webpackJsonpreact-tab-site"]||[]).push([[0],{134:function(t,e,n){t.exports=n(260)},139:function(t,e,n){},141:function(t,e,n){},260:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(25),o=n.n(i),s=(n(139),n(140),n(112)),l=n(113),u=n(26),c=n(123),h=n(124),d=(n(141),n(269)),f=n(270),v=n(271),g=n(272),m=n(268),p=n(267);function E(t){for(var e=t.split("\n").map((function(t){return function(t){var e=t.split("|"),n="",a="";1===e.length?a=e[0]:(n=e[0],a=e[1]);return{tuning:n,notes:a.split("").map((function(t){return isNaN(t)||" "===t?-1:parseInt(t)}))}}(t)})),n=e.length/7,a=[],r=0;r<6;r++){var i,o;a[r]=(null===(i=e[r])||void 0===i||null===(o=i.tuning)||void 0===o?void 0:o.trim())||""}a.every((function(t){return!t||0===t.length}))&&(a=[]);for(var s=[[],[],[],[],[],[]],l=0,u=n;l<u;l++)for(var c=0;c<6;c++){var h;s[c]=s[c].concat(null===(h=e[c+7*l])||void 0===h?void 0:h.notes)}for(var d=0;d<6;d++)s[d]=s[d].filter((function(t){return void 0!==t}));return{tunings:a,strings:s}}function b(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["e","B","G","D","A","E"];if(0===t.length)return"";for(var r=[],i=0;i<6;i++)r[i]=a[i]+" ".repeat(2-a[i].length)+"|";for(var o=t.map((function(t){for(var n=[],a=t.map((function(t){return t.toString().replace("-1","-")})),r=0,i=t.length/e;r<i;r++){var o=a.slice(r*e,(r+1)*e).join("");o.length<e&&(o+="-".repeat(e-o.length)),n.push(o)}return n}));o[0].length<n;)for(var s=0;s<t.length;s++)o[s].push("-".repeat(e));for(var l=[],u=0,c=o[0].length;u<c;u++){for(var h=0;h<6;h++)l.push(r[h]+o[h][u]);u!==c-1&&l.push("")}if(o[0].length>n){var d=l.slice(-6).every((function(t){return!t||t.match(/^..\|-+$/g)}));d&&(l=l.slice(0,-6))}return l.join("\n")}function y(t,e,n,a,r){var i=t.map((function(t){return t.length})),o=Math.min.apply(Math,i),s=Math.max.apply(Math,i),l=i.filter((function(t){return o===t})).length,u=i.filter((function(t){return s===t})).length;if(s-o!==1)return{newStrings:e,newCursor:n};var c=n;if(1===l){var h=w(n,a,!1),d=i.findIndex((function(t){return t===o}));if(r)for(var f=0;f<6;f++)d!==f&&t[f].splice(h,1);else t[d].splice(h,0,-1)}if(1===u){var v=w(n,a,!0),g=i.findIndex((function(t){return t===s}));if(r)for(var m=0;m<6;m++)g!==m&&t[m].splice(v-1,0,-1);else t[g].splice(v,1);c=function(t,e,n){var a=6*n+25;return Math.floor(t/n)*a+(n+4)*e+t%n+3}(v,g,a)}return{newStrings:t,newCursor:c}}function w(t,e,n){var a=6*e+25,r=-3;return n&&t%a%(e+4)===0&&(r+=e+3),t%a%(e+4)+Math.floor(t/a)*e+r}function M(t,e){var n=1;return t.length>0&&(n=Math.floor((t[0].length-1)/e)+1),n<4&&(n=4),(7*n-1).toString()}var k=function(t){Object(h.a)(n,t);var e=Object(c.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).state={currentTabText:"",currentStrings:[[],[],[],[],[],[]],insertMode:!1,cursorPosition:-1,lineLength:65,songs:[],tunings:["e","B","G","D","A","E"]},a.handleEditModeChange=a.handleEditModeChange.bind(Object(u.a)(a)),a.handleTabEdit=a.handleTabEdit.bind(Object(u.a)(a)),a.handleLoad=a.handleLoad.bind(Object(u.a)(a)),a.handleKeyPress=a.handleKeyPress.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"handleTabLoad",value:function(t){var e=document.getElementById("tab-text").firstElementChild.selectionStart,n=this.state.lineLength,a=this.state.currentStrings,r=this.state.insertMode,i=E(t),o=i.tunings,s=i.strings;o=o||this.state.tunings;var l=y(s,a,e,n,r),u=l.newStrings,c=l.newCursor;this.setState({currentStrings:u,cursorPosition:c,tunings:o})}},{key:"handleTabEdit",value:function(t){var e=t.target.value;this.handleTabLoad(e)}},{key:"handleLoad",value:function(t){var e=t.target.files[0],n=this;if(e){var a=new FileReader;a.onload=function(t){var e=t.target.result;n.handleTabLoad(e)},a.readAsText(e)}}},{key:"buildEditButton",value:function(t,e){return e?r.a.createElement(d.a,{positive:!0},t):r.a.createElement(d.a,{onClick:this.handleEditModeChange},t)}},{key:"handleEditModeChange",value:function(t){this.setState({insertMode:!this.state.insertMode})}},{key:"handleKeyPress",value:function(t){}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(f.a,{container:!0,columns:1,stackable:!0},r.a.createElement(v.a,{as:"h1"},"React Tab Editor "),r.a.createElement(f.a.Column,null,r.a.createElement(g.a,{className:"action-buttons"},r.a.createElement(m.a,{link:!0,className:"tab-links"}),r.a.createElement("div",{className:"ui input"},r.a.createElement("input",{type:"file",onChange:this.handleLoad}))),r.a.createElement(g.a,null,r.a.createElement(d.a.Group,null,this.buildEditButton("Insert",this.state.insertMode),r.a.createElement(d.a.Or,null),this.buildEditButton("Replace",!this.state.insertMode))),r.a.createElement(g.a,{id:"tab-text"},r.a.createElement(p.a,{rows:M(this.state.currentStrings,this.state.lineLength),value:b(this.state.currentStrings,this.state.lineLength,4,this.state.tunings),onKeyDown:this.handleKeyPress,onChange:this.handleTabEdit})))))}},{key:"componentDidUpdate",value:function(){var t=this.state,e=t.cursorPosition,n=t.lineLength;if(-1!==e){var a=document.getElementById("tab-text").firstElementChild;e>a.value.length&&(e-=6*(n+1)+1-n),a.selectionStart=e,a.selectionEnd=e,this.setState({cursorPosition:-1})}}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[134,1,2]]]);
//# sourceMappingURL=main.9b9b636a.chunk.js.map